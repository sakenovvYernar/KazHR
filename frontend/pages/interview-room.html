<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ö–æ–º–Ω–∞—Ç–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è - KazHR.AI</title>
  <link rel="stylesheet" href="../styles/global.css">
  <link rel="stylesheet" href="../styles/dashboard.css">
  <link rel="stylesheet" href="../styles/interview-room.css">
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar">
    <div class="container">
      <div class="flex-between">
        <div class="logo">
          <h2>üöÄ KazHR.AI</h2>
        </div>
        <div class="nav-links">
          <a href="dashboard.html">Dashboard</a>
          <button onclick="utils.logout()" class="btn btn-outline btn-sm">Logout</button>
        </div>
      </div>
    </div>
  </nav>

  <!-- Join Screen -->
  <div id="joinScreen" class="join-screen">
    <div class="container">
      <div class="join-card card">
        <div class="card-header text-center">
          <h2>üé• –í—Ö–æ–¥ –≤ –∫–æ–º–Ω–∞—Ç—É —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è</h2>
          <p>–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –¥–ª—è –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∫ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—é</p>
        </div>
        <div class="card-body">
          <form id="joinForm">
            <div class="form-group">
              <label for="interviewCode">–ö–æ–¥ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è</label>
              <input type="text" id="interviewCode" name="interviewCode" 
                     class="form-control" placeholder="XXXXXX" maxlength="6" 
                     style="text-transform: uppercase; letter-spacing: 2px; text-align: center; font-size: 1.5rem;" required>
            </div>
            <div class="form-group">
              <label for="participantName">–í–∞—à–µ –∏–º—è</label>
              <input type="text" id="participantName" name="participantName" 
                     class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è" required>
            </div>
            <button type="submit" class="btn btn-primary btn-lg btn-block">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—é</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Interview Room -->
  <div id="interviewRoom" class="interview-room" style="display: none;">
    <div class="interview-header">
      <div class="container">
        <div class="flex-between">
          <div class="interview-info">
            <h3>–°–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–µ</h3>
            <p>–ö–æ–¥: <span id="roomCode" class="room-code"></span></p>
            <p>–°—Ç–∞—Ç—É—Å: <span id="connectionStatus" class="connection-status">–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...</span></p>
          </div>
          <div class="interview-controls">
            <button id="muteBtn" onclick="toggleMute()" class="btn btn-outline">üîä</button>
            <button id="videoBtn" onclick="toggleVideo()" class="btn btn-outline">üìπ</button>
            <button id="screenShareBtn" onclick="toggleScreenShare()" class="btn btn-outline">üñ•Ô∏è</button>
            <button id="recordBtn" onclick="toggleRecording()" class="btn btn-danger">‚è∫Ô∏è –ó–∞–ø–∏—Å—å</button>
          </div>
          <div class="interview-actions">
            <button onclick="endCall()" class="btn btn-danger btn-lg end-call-btn">
              üìû –ó–∞–≤–µ—Ä—à–∏—Ç—å –∑–≤–æ–Ω–æ–∫
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="interview-main">
      <div class="container">
        <div class="grid grid-3">
          <!-- Main Video Area -->
          <div class="col-2">
            <div class="video-container">
              <video id="localVideo" class="video-element" autoplay muted playsinline></video>
              <video id="remoteVideo" class="video-element" autoplay playsinline></video>
              
              <!-- Connection indicators -->
              <div id="connectionIndicators" class="connection-indicators">
                <div class="indicator" id="audioIndicator">üîá</div>
                <div class="indicator" id="videoIndicator">üìµ</div>
                <div class="indicator" id="networkIndicator">üì∂</div>
              </div>
              
              <!-- Recording indicator -->
              <div id="recordingIndicator" class="recording-indicator" style="display: none;">
                <span class="recording-dot"></span>
                <span>–ò–¥–µ—Ç –∑–∞–ø–∏—Å—å</span>
              </div>
              
              <!-- Quick end call button -->
              <button onclick="endCall()" class="quick-end-call-btn">
                üìû
              </button>
            </div>

            <!-- AI Analysis Panel -->
            <div class="ai-panel card mt-4">
              <div class="card-header">
                <h4>ü§ñ AI –ê–Ω–∞–ª–∏–∑ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è</h4>
                <button onclick="toggleAIAnalysis()" class="btn btn-sm btn-outline">–ü–∞—É–∑–∞</button>
              </div>
              <div class="card-body">
                <div id="aiAnalysis">
                  <div class="analysis-placeholder">
                    <p>AI –∞–Ω–∞–ª–∏–∑ –Ω–∞—á–Ω–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ –≤—Ä–µ–º—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è</p>
                  </div>
                </div>
                
                <!-- Real-time transcription -->
                <div class="transcription-panel">
                  <h5>üìù –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è</h5>
                  <div id="transcriptionText" class="transcription-text">
                    <p class="transcription-placeholder">–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å...</p>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Side Panel -->
          <div class="col-1">
            <!-- Participants -->
            <div class="card mb-4">
              <div class="card-header">
                <h4>–£—á–∞—Å—Ç–Ω–∏–∫–∏</h4>
              </div>
              <div class="card-body">
                <div id="participantsList">
                  <div class="participant-item">
                    <div class="participant-avatar">üë§</div>
                    <div class="participant-info">
                      <p id="localName">–í—ã</p>
                      <span class="badge badge-success">–í –∫–æ–º–Ω–∞—Ç–µ</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Chat -->
            <div class="card">
              <div class="card-header">
                <h4>üí¨ –ß–∞—Ç</h4>
              </div>
              <div class="card-body">
                <div id="chatMessages" class="chat-messages">
                  <div class="chat-placeholder">
                    <p>–ß–∞—Ç —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è</p>
                  </div>
                </div>
                <div class="chat-input">
                  <input type="text" id="messageInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." 
                         onkeypress="if(event.key === 'Enter') sendMessage()">
                  <button onclick="sendMessage()" class="btn btn-primary btn-sm">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Interview Timer -->
    <div class="interview-timer">
      <div class="container">
        <div class="timer-display">
          <span>‚è±Ô∏è –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: </span>
          <span id="timer">00:00:00</span>
          <span id="recordingTime" style="display: none;"> | –ó–∞–ø–∏—Å—å: <span id="recordingDuration">00:00:00</span></span>
        </div>
      </div>
    </div>
  </div>

  <script src="../scripts/api.js"></script>
  <script src="../scripts/utils.js"></script>
  <script src="../scripts/interview-room.js"></script>
</body>
</html>
